# ByteLang

Настраиваемый Статический язык управляющих программ для крошечных интерпретаторов

# Настройки исполняющей машины

## `pointer_type`

Выбор примитива для указателя на место в программе

## `native_function_index_type`

Выбор примитива для индекса нативной функции в таблице

## `paths`

Пути поиска импорта

---

# Исходный код

## Термины

### module

Является файлом с расширением - `.bl`

Содержит реестры

### identifier

Сплошная строка из символов из набора: `[A-Z]` `[a-z]` `[0-9]` `_`

Не начинается с цифры

### value

Значение известное на этапе компиляции

### type

Обладается любым значением

### variable

Значение известное только во время выполнения

### field

Хранит [идентификатор](#identifier) и [тип](#type)

Экземпляр имеет значение данного типа

Объявление:
`<identifier>: <type>`

### function

Обладает [идентификатором](#identifier), возвращаемым [типом](#type), списком аргументов являющимся перечислением [полей](#field) через разделитель

### registry

Хранилище [значений](#value) с доступом по [идентификатору](#identifier)

Реализует ленивый доступ

---

## Ключевые слова

### pub

Помечает [идентификатор](#identifier) доступным при [импорте](#import)

```
pub const pi = 4
```

### import

Добавляет в [реестр](#registry) данного [модуля](#module) [значение](#value) типа [структуры](#struct), которая обладает [публичными](#pub) [полями](#field) импортированного модуля

```
import <identifier>
```

### const

Создаёт новый [идентификатор](#identifier) для [значения](#value) в [реестре](#registry) данного [модуля](#module)

```
const <identifier> = <value>
```

### var

Создаёт новое [переменную](#variable)

```
var <field> = <value> 
var <field> = undefined
```

### struct

Создаёт [значения](#value) [типа](#type) структуры с перечисленными [полями](#field)

```
struct {
    <field> ,
    ...
    <field> , // Разрешается оставить разделитель
} // Это становится значением type. Вго можно присвоить константе
```

### fn

Добавляет в реестр [Функцию](#function) с указанным идентификатором

Реализация в коде

```
fn <identifier> ( <field> , ... , <field> , ) <type> {
    // Тело функции    
}
```

Реализация на стороне исполнителя

```
fn <identifier> ( <field> , ... , <field> , ) <type> = <native_function_index>
```

---

# Файл компилированной программы (ByteLang)

Расширение - `.blc` - ByteLang Compiled

## Формат компилированного файла

Максимальный размер определяется лимитом `pointer_type`

Состоит из двух секций:
data, code

## Data

Данные программы (Статические, Глобальные значения)

## Code

Содержит записанные подряд вызовы нативных функции

В конце реализации функций